<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: src/network.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: src/network.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * NanoMemoTools.network module
 * @module NanoMemoTools/network
 */

const axios = require('axios');
const ReconnectingWebSocket = require('reconnecting-websocket');
const WS = require('ws');

/**
* This function sends a network POST request
* @public
* @param {string} url target of POST request
* @param {Object} params data fields to include in POST request
* @returns {Promise} Promise object represents the data field of a POST request's response
*/
module.exports.post = async function(url, params) {
    let response = await axios.post(url, params);
    return response.data;
}

/**
* This function sends a network GET request
* @private
* @param {string} url target of POST request
* @returns {Promise} Promise object represents the data field of a POST request's response
*/
module.exports.get = async function(url) {
    let response = await axios.get(url);
    return response.data;
}

/**
* This function sets up a websocket
* @private
* @param {string} url address of websocket
* @param {function} onopen function called when websocket is opened successfully; handles one argument, the websocket object
* @param {function} onmessage function called when websocket receives a message; handles two arguments, 1. websocket object 2. message
* @param {function} onclose function called when websocket is closed; handles one argument, the websocket object
* @param {function} onerror function called when websocket encounters an error; handles two arguments, 1. websocket object 2. error
* @returns {object} websocket object
*/
module.exports.websocket = async function(url, onopen, onmessage, onclose, onerror) {
    let ws = new ReconnectingWebSocket(url, [], {
        // WebSocket: WS,
        connectionTimeout: 1000,
        maxRetries: Infinity,
        maxReconnectionDelay: 8000,
        minReconnectionDelay: 3000
    });

    ws.onmessage = msg => {
        onmessage(ws, msg);
    }
    ws.onopen = () => {
        onopen(ws);
    }
    ws.onclose = () => {
        onclose(ws);
    }
    ws.onerror = (e) => {
        onerror(ws, e);
    }

    return ws;
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-NanoMemoTools.html">NanoMemoTools</a></li><li><a href="module-NanoMemoTools_memo.html">NanoMemoTools/memo</a></li><li><a href="module-NanoMemoTools_network.html">NanoMemoTools/network</a></li><li><a href="module-NanoMemoTools_node.html">NanoMemoTools/node</a></li><li><a href="module-NanoMemoTools_server.html">NanoMemoTools/server</a></li><li><a href="module-NanoMemoTools_tools.html">NanoMemoTools/tools</a></li><li><a href="module-NanoMemoTools_version.html">NanoMemoTools/version</a></li></ul><h3>Classes</h3><ul><li><a href="module-NanoMemoTools_memo-EncryptedMemo.html">EncryptedMemo</a></li><li><a href="module-NanoMemoTools_memo-Memo.html">Memo</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Fri Apr 16 2021 20:24:01 GMT-0500 (Central Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
